# =============================================================================
# PetCam AI Server - pytest 설정 파일
# =============================================================================
# 
# 이 파일이 하는 일:
#     pytest 실행 시 기본 옵션들을 설정합니다.
#     매번 긴 명령어를 입력하지 않아도 됩니다!
#
# 사용 방법:
#     pytest              # 모든 테스트 실행
#     pytest -v           # 자세한 출력
#     pytest tests/test_auth.py  # 특정 파일만 실행
# =============================================================================

[pytest]

# -----------------------------------------------------------------------------
# 비동기 테스트 모드 설정
# -----------------------------------------------------------------------------
# asyncio_mode = auto
#   → @pytest.mark.asyncio를 자동으로 붙여줌
#   → 비동기 함수 테스트가 편해짐
asyncio_mode = auto

# -----------------------------------------------------------------------------
# 기본 실행 옵션
# -----------------------------------------------------------------------------
# -v          : 자세한 출력 (어떤 테스트가 통과/실패했는지 보여줌)
# --tb=short  : 에러 발생 시 간단한 트레이스백만 출력
# -ra         : 테스트 요약 출력 (실패/스킵된 테스트 보여줌)
addopts = -v --tb=short -ra

# -----------------------------------------------------------------------------
# 테스트 파일 찾기 규칙
# -----------------------------------------------------------------------------
# test_*.py 또는 *_test.py 파일을 테스트 파일로 인식
python_files = test_*.py *_test.py

# test_ 로 시작하는 함수를 테스트로 인식
python_functions = test_*

# Test로 시작하는 클래스를 테스트 클래스로 인식
python_classes = Test*

# -----------------------------------------------------------------------------
# 테스트 디렉토리
# -----------------------------------------------------------------------------
testpaths = tests

# -----------------------------------------------------------------------------
# 경고 필터
# -----------------------------------------------------------------------------
# 일부 경고 메시지를 숨김 (너무 많으면 보기 힘드니까)
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
